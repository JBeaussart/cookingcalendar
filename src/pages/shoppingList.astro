---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Liste de courses">
  <div class="min-h-screen bg-gradient-to-br from-orange-50/30 via-amber-50/20 to-slate-50">
    <div class="mx-auto max-w-3xl px-4 py-12">
      <!-- Header -->
      <div class="mb-8 text-center">
        <h1 class="text-4xl font-bold text-slate-900 mb-2">Ma liste</h1>
        <p class="text-slate-600">N'oubliez rien pour vos recettes !</p>
      </div>

      <!-- Actions & Add Form -->
      <div class="mb-8 space-y-6">
        <!-- Add Form -->
        <form id="addForm" class="flex flex-col sm:flex-row gap-3">
          <div class="relative flex-1">
            <input
              id="fItem"
              type="text"
              placeholder="Ajouter un article..."
              class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 pl-11 text-sm focus:outline-none focus:ring-2 focus:ring-orange-300 shadow-sm"
              required
            />
            <div
              class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4 text-slate-400"
            >
              <svg
                class="h-5 w-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 4v16m8-8H4"></path>
              </svg>
            </div>
          </div>
          <input
            id="fQty"
            type="number"
            step="any"
            placeholder="Qté"
            class="w-full sm:w-24 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-orange-300 shadow-sm"
          />
          <button
            type="submit"
            class="inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-orange-300 to-amber-500 px-6 py-3 text-sm font-bold text-white shadow-lg shadow-orange-300/30 transition-all hover:from-orange-300 hover:to-amber-600 hover:shadow-xl hover:scale-105 active:scale-95"
          >
            Ajouter
          </button>
        </form>

        <!-- View Toggle & Bulk Actions -->
        <div class="flex flex-row justify-center items-center gap-3 overflow-x-auto">
          <button
            id="btnCheckAll"
            type="button"
            class="inline-flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm ring-1 ring-slate-200 transition hover:bg-orange-50 hover:text-orange-300 active:scale-95 whitespace-nowrap"
          >
            <svg
              class="h-4 w-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            Tout cocher
          </button>
          <button
            id="btnUncheckAll"
            type="button"
            class="inline-flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm ring-1 ring-slate-200 transition hover:bg-orange-50 hover:text-orange-300 active:scale-95 whitespace-nowrap"
          >
            <svg
              class="h-4 w-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            Tout décocher
          </button>
          <button
            id="btnToggleView"
            type="button"
            class="inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-orange-300 to-amber-500 w-10 h-10 text-sm font-medium text-white shadow-sm ring-1 ring-orange-200 transition hover:from-orange-300 hover:to-amber-600 active:scale-95"
            title="Vue condensée"
          >
            <svg
              id="viewIcon"
              class="h-5 w-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
            <span id="viewLabel" class="sr-only">Vue condensée</span>
          </button>
        </div>
      </div>

      <!-- List Container -->
      <div
        class="rounded-3xl bg-white shadow-xl shadow-slate-200/50 ring-1 ring-slate-100 mb-20 sm:mb-0"
      >
        <ul id="list" class="divide-y divide-slate-100"></ul>

        <!-- Empty State (handled in JS, but default hidden here) -->
        <div id="emptyState" class="hidden p-12 text-center">
          <div
            class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-50"
          >
            <svg
              class="h-8 w-8 text-slate-300"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
              ></path>
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-900">
            Votre liste est vide
          </h3>
          <p class="mt-1 text-slate-500">
            Ajoutez des recettes au planning ou des articles manuellement.
          </p>
        </div>
      </div>

      <p
        id="status"
        class="mt-4 text-center text-sm font-medium text-slate-400"
      >
      </p>
    </div>
  </div>

  <script src="/src/scripts/shopping-list.js"></script>
</Layout>
